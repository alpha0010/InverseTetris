(function(){var n;n=function(){function l(b){this.r=b}l.prototype.h=null;l.prototype.B=null;l.prototype.r=0;l.prototype.fa=function(b){this.h=b;this.B={};0===this.r?(this.evaluate=function(a){var e,c,d,h,b,g,k;c=h=d=0;for(g=a.length;0<=g?h<g:h>g;c=0<=g?++h:--h)for(e=b=0,k=a[c].length;0<=k?b<k:b>k;e=0<=k?++b:--b)a[c][e]&&(d+=a.length-c+4+2*Math.random());return d},this.r=1):this.r-=1};l.prototype.ca=function(b,a){return this.J(this.W(b),a)[0]};l.prototype.la=function(b,a){return this.J(this.W(b),a,this.r-1)[1]};l.prototype.J=function(b,a,e){var c,d,h,f;null==e&&(e=0);h=this.da(a);d=this.v(b,h,e);c=0;f=this.T(b,h,e);f<d&&(d=f,c=1);h.e=a.e;f=this.U(b,h,e);f<d&&(d=f,c=2);1<a.Y&&(f=this.oa(b,h,e),f<d&&(d=f,c=3),2<a.Y&&(f=this.$(b,h,e),f<Number.MAX_VALUE&&(a=h.d,h.d=this.q(h.d),f=Math.min(f,this.$(b,h,e)),h.d=a),f<d&&(d=f,c=4)));return[c,d]};l.prototype.oa=function(b,a,e){var c,d,h;h=a.d;d=a.e;c=Number.MAX_VALUE;a.d=this.q(this.q(this.q(a.d)));this.m(b,a,a.g,a.e)||(c=this.v(b,a,e),c=Math.min(c,this.U(b,a,e)),a.e=d,c=Math.min(c,this.T(b,a,e)));a.e=d;a.d=h;return c};l.prototype.$=function(b,a,e){var c,d,h;h=a.d;d=a.e;c=Number.MAX_VALUE;a.d=this.q(a.d);this.m(b,a,a.g,a.e)||(c=this.v(b,a,e),c=Math.min(c,this.U(b,a,e)),a.e=d,c=Math.min(c,this.T(b,a,e)));a.e=d;a.d=h;return c};l.prototype.T=function(b,a,e){var c;for(c=Number.MAX_VALUE;0<a.e;){a.e-=1;if(this.m(b,a,a.g,a.e))break;c=Math.min(c,this.v(b,a,e))}return c};l.prototype.U=function(b,a,e){var c;for(c=Number.MAX_VALUE;a.e+a.d[0].length<b[0].length;){a.e+=1;if(this.m(b,a,a.g,a.e))break;c=Math.min(c,this.v(b,a,e))}return c};l.prototype.q=function(b){var a,e,c,d,h,f,g;e=[];c=d=0;for(f=b.length;0<=f?d<f:d>f;c=0<=f?++d:--d)for(a=h=0,g=b[c].length;0<=g?h<g:h>g;a=0<=g?++h:--h)0===c&&(e[a]=[]),e[a][c]=b[b.length-c-1][a];return e};l.prototype.W=function(b){var a,e,c,d,h,f,g;e=[];c=d=0;for(f=b.length;0<=f?d<f:d>f;c=0<=f?++d:--d)for(e[c]=[],a=h=0,g=b[c].length;0<=g?h<g:h>g;a=0<=g?++h:--h)e[c][a]=b[c][a].k;return e};l.prototype.da=function(b){var a,e,c,d,h,f,g;e={g:Math.max(0,b.g),e:b.e,d:null,d:[]};c=d=0;for(f=b.d.length;0<=f?d<f:d>f;c=0<=f?++d:--d)for(e.d[c]=[],a=h=0,g=b.d[c].length;0<=g?h<g:h>g;a=0<=g?++h:--h)e.d[c][a]=1===b.d[c][a];return e};l.prototype.v=function(b,a,e){var c,d,h,f,g,k,q;if(e>=this.r)return this.evaluate(this.Z(b,a));a=this.Z(b,a);b="";if(0===e){f=0;for(k=a.length;f<k;f++){d=a[f];g=h=0;for(q=d.length;g<q;g++)c=d[g],h*=2,c&&(h+=1);0<b.length?b+="|"+h:0<h&&(b+=h)}if(this.B.hasOwnProperty(b))return this.B[b]}d=Number.MIN_VALUE;g=this.h;h=0;for(f=g.length;h<f;h++)c=g[h],d=Math.max(d,this.J(a,c,e+1)[1]);0===e&&(this.B[b]=d);return d};l.prototype.Z=function(b,a){var e,c,d,h,f,g,k,q,l,m;for(c=0;!this.m(b,a,a.g+c+1,a.e);)++c;d=[];h=g=0;for(l=b.length;0<=l?g<l:g>l;h=0<=l?++g:--g)for(d[h]=[],e=k=0,m=b[h].length;0<=m?k<m:k>m;e=0<=m?++k:--k)d[h][e]=b[h][e];h=g=0;for(l=a.d.length;0<=l?g<l:g>l;h=0<=l?++g:--g)for(e=k=0,m=a.d[h].length;0<=m?k<m:k>m;e=0<=m?++k:--k)(f=d[h+a.g+c])[q=e+a.e]||(f[q]=a.d[h][e]);this.K(d);return d};l.prototype.m=function(b,a,e,c){var d,h,f,g,k,l;h=f=0;for(k=a.d.length;0<=k?f<k:f>k;h=0<=k?++f:--f){if(0>e+h||e+h>=b.length)return!0;d=g=0;for(l=a.d[h].length;0<=l?g<l:g>l;d=0<=l?++g:--g)if(0>c+d||c+d>=b[0].length||a.d[h][d]&&b[e+h][c+d])return!0}return!1};l.prototype.evaluate=function(b){var a,e,c,d,h,f,g,k,l,p;d=c=h=0;for(k=b.length;0<=k?c<k:c>k;d=0<=k?++c:--c)for(a=f=0,l=b[d].length;0<=l?f<l:f>l;a=0<=l?++f:--f)if(b[d][a])h+=(b.length-d+2)/2*this.ba(a,b[d].length),d<b.length-3&&(h+=(b.length-d+6)/8);else if(0<d&&b[d-1][a])for(h+=18,e=g=d,p=b.length;(d<=p?g<p:g>p)&&!b[e][a];e=d<=p?++g:--g)h+=1;a=f=0;for(k=b[0].length;0<=k?f<k:f>k;a=0<=k?++f:--f){e=0;c=-1;d=g=0;for(l=b.length;0<=l?g<l:g>l;d=0<=l?++g:--g)b[d][a]||0!==a&&!b[d][a-1]||a!==b[0].length-1&&!b[d][a+1]||(-1===c&&(c=d),++e);1<e&&(h+=e*(b.length-c+3)/4)}return h};l.prototype.ba=function(b,a){return(((b>a/2?a-b-1:b)+2)/(a+2)+2)/2};l.prototype.K=function(b){var a,e,c;a=e=0;for(c=b.length;0<=c?e<c:e>c;a=0<=c?++e:--e)this.H(b[a])&&this.Q(b,a)};l.prototype.H=function(b){var a,e,c;e=0;for(c=b.length;e<c;e++)if(a=b[e],!a)return!1;return!0};l.prototype.Q=function(b,a){var e,c,d;b.splice(a,1);b.splice(0,0,[]);e=c=0;for(d=b[1].length;0<=d?c<d:c>d;e=0<=d?++c:--c)b[0][e]=!1};return l}();window.TetrisAI=n}).call(this);
