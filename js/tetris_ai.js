(function(){var p;p=function(){function l(){}l.prototype.W=function(c,a){var b,d,e,h,g,f;g=this.Y(c);h=this.X(a);d=this.t(g,h);b=0;f=this.N(g,h);f<d&&(d=f,b=1);h.e=a.e;f=this.O(g,h);f<d&&(d=f,b=2);1<a.S&&(f=this.ha(g,h),f<d&&(d=f,b=3),2<a.S&&(f=this.T(g,h),f<Number.MAX_VALUE&&(e=h.d,h.d=this.o(h.d),f=Math.min(f,this.T(g,h)),h.d=e),f<d&&(b=4)));return b};l.prototype.ha=function(c,a){var b,d,e;e=a.d;d=a.e;b=Number.MAX_VALUE;a.d=this.o(this.o(this.o(a.d)));this.k(c,a,a.f,a.e)||(b=this.t(c,a),b=Math.min(b, this.O(c,a)),a.e=d,b=Math.min(b,this.N(c,a)));a.e=d;a.d=e;return b};l.prototype.T=function(c,a){var b,d,e;e=a.d;d=a.e;b=Number.MAX_VALUE;a.d=this.o(a.d);this.k(c,a,a.f,a.e)||(b=this.t(c,a),b=Math.min(b,this.O(c,a)),a.e=d,b=Math.min(b,this.N(c,a)));a.e=d;a.d=e;return b};l.prototype.N=function(c,a){var b;for(b=Number.MAX_VALUE;0<a.e;){a.e-=1;if(this.k(c,a,a.f,a.e))break;b=Math.min(b,this.t(c,a))}return b};l.prototype.O=function(c,a){var b;for(b=Number.MAX_VALUE;a.e+a.d[0].length<c[0].length;){a.e+= 1;if(this.k(c,a,a.f,a.e))break;b=Math.min(b,this.t(c,a))}return b};l.prototype.o=function(c){var a,b,d,e,h,g,f;b=[];d=e=0;for(g=c.length;0<=g?e<g:e>g;d=0<=g?++e:--e)for(a=h=0,f=c[d].length;0<=f?h<f:h>f;a=0<=f?++h:--h)0===d&&(b[a]=[]),b[a][d]=c[c.length-d-1][a];return b};l.prototype.Y=function(c){var a,b,d,e,h,g,f;b=[];d=e=0;for(g=c.length;0<=g?e<g:e>g;d=0<=g?++e:--e)for(b[d]=[],a=h=0,f=c[d].length;0<=f?h<f:h>f;a=0<=f?++h:--h)b[d][a]=c[d][a].h;return b};l.prototype.X=function(c){var a,b,d,e,h,g,f; b={f:c.f,e:c.e,d:null,d:[]};d=e=0;for(g=c.d.length;0<=g?e<g:e>g;d=0<=g?++e:--e)for(b.d[d]=[],a=h=0,f=c.d[d].length;0<=f?h<f:h>f;a=0<=f?++h:--h)b.d[d][a]=1===c.d[d][a];return b};l.prototype.t=function(c,a){return this.evaluate(this.ga(c,a))};l.prototype.ga=function(c,a){var b,d,e,h,g,f,k,l,m,n;for(d=0;!this.k(c,a,a.f+d+1,a.e);)++d;e=[];h=f=0;for(m=c.length;0<=m?f<m:f>m;h=0<=m?++f:--f)for(e[h]=[],b=k=0,n=c[h].length;0<=n?k<n:k>n;b=0<=n?++k:--k)e[h][b]=c[h][b];h=f=0;for(m=a.d.length;0<=m?f<m:f>m;h=0<= m?++f:--f)for(b=k=0,n=a.d[h].length;0<=n?k<n:k>n;b=0<=n?++k:--k)(g=e[h+a.f+d])[l=b+a.e]||(g[l]=a.d[h][b]);return e};l.prototype.k=function(c,a,b,d){var e,h,g,f,k,l;h=g=0;for(k=a.d.length;0<=k?g<k:g>k;h=0<=k?++g:--g){if(0>b+h||b+h>=c.length)return!0;e=f=0;for(l=a.d[h].length;0<=l?f<l:f>l;e=0<=l?++f:--f)if(0>d+e||d+e>=c[0].length||a.d[h][e]&&c[b+h][d+e])return!0}return!1};l.prototype.evaluate=function(c){var a,b,d,e,h,g,f,k,l;h=0;this.F(c);e=b=0;for(g=c.length;0<=g?b<g:b>g;e=0<=g?++b:--b)for(a=d=0, f=c[e].length;0<=f?d<f:d>f;a=0<=f?++d:--d)c[e][a]?h+=(c.length-e+2)/2*this.V(a,c[e].length):0<e&&c[e-1][a]&&(h+=10);a=g=0;for(k=c[0].length;0<=k?g<k:g>k;a=0<=k?++g:--g){b=0;d=-1;e=f=0;for(l=c.length;0<=l?f<l:f>l;e=0<=l?++f:--f)c[e][a]||0!==a&&!c[e][a-1]||a!==c[0].length-1&&!c[e][a+1]||(-1===d&&(d=e),++b);1<b&&(h+=b*(c.length-d+2)/4)}return h};l.prototype.V=function(c,a){return((c>a/2?a-c-1:c)/a+2)/2};l.prototype.F=function(c){var a,b,d;a=b=0;for(d=c.length;0<=d?b<d:b>d;a=0<=d?++b:--b)this.C(c[a])&& this.L(c,a)};l.prototype.C=function(c){var a,b,d;b=0;for(d=c.length;b<d;b++)if(a=c[b],!a)return!1;return!0};l.prototype.L=function(c,a){var b,d,e;c.splice(a,1);c.splice(0,0,[]);b=d=0;for(e=c[1].length;0<=e?d<e:d>e;b=0<=e?++d:--d)c[0][b]=!1};return l}();window.TetrisAI=p}).call(this);
